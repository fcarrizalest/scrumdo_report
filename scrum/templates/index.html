{% extends "base.html" %}

{% block content %}

<<<<<<< HEAD
=======
<div class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
<h1>{{end_date}}</h1>


>>>>>>> 1d51e781ff165dc916ab16415266cdb4e9ac4a44

<h1>{{end_date}}</h1>


<form action="{{url_for('.index')}}" method="POST" >

	{{ form.csrf_token }}

	<div>{{ form.end_date }}

	<input class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit"> 

	</div>
</form>

<<<<<<< HEAD
=======
</div>
<div class="  section--center mdl-grid mdl-grid--no-spacing">
	 <div class="mdl-cell mdl-cell--12-col">
>>>>>>> 1d51e781ff165dc916ab16415266cdb4e9ac4a44
<h1>Resumen</h1>
<table>


<tr>
	<th> Nombre  </th>
	<th> #Historias </th>
	<th> #Puntos </th>

	<th> #HistoriasB </th>
	<th> #Bugs Puntos </th>

</tr>




{% for iteration in rows%}

	
		<tr>	

		<td> {{ iteration.PName}} - {{iteration.name}}</td>
		<td style="text-align:right"> {{iteration.story_count}} </td>
		<td style="text-align:right" >  {{iteration.SPoints}}  </td>

		<td style="text-align:right" >   {{iteration.SB}}  </td>
		<td style="text-align:right" >   {{iteration.SBPoints}}  </td>

	</tr>

{% endfor %}
	<tr>
		<td></td>
		<td style="text-align:right"> {{ rows|sum(  attribute='story_count' )}} </td>
		<td style="text-align:right" > {{ rows|sum(  attribute='SPoints' )}} </td>

		<td style="text-align:right" >  {{ rows|sum(  attribute='SB' )}}  </td>
		<td style="text-align:right" >  {{ rows|sum(  attribute='SBPoints' )}}  </td>
	</tr>

</table>


<h1> Usuarios </h1>
<table>
	<tr>
		<td>Usuario</td>
		
		<td> #Historias</td>
		<td> #Puntos </td>
	<tr>

	{% for user in users %}

		<tr>
				<td>{{user.username}}</td>
				
				<td style="text-align:right">{{user.total}}</td>
				<td style="text-align:right">{{user.puntos}}</td>


		<tr>

	{% endfor %}

	<tr>
				<td></td>
				
				<td style="text-align:right">{{ users|sum(attribute='total') }}</td>
				<td style="text-align:right">{{users|sum(attribute='puntos') }}</td>


		<tr>

</table>

<h1>Detalle</h1>


{% for iteration in iteration_list%}
	

	{% if iteration.stories|sum(attribute='points') > 0 %}


	<h2>{{iteration.project.name}} - {{iteration.name}}  ( {{ iteration.stories|sum(attribute='points') }} ) </h2>
	<br>
	<table>

		<tr>
				<th>  Usuario(s) </th>
				<th>  #Historia </th>
				<th>  Historia</th>
				<th>  Puntos </th>
				<th>  Status</th>
				<th>  Tipo</th>


		</tr>
	{% for story in iteration.stories%}
	<tr>	

			<td> 


				{{story.users|map(attribute='username')|join(', ') }}
				

			</td>

			<td> #{{story.number}}</td>
			<td> {{story.summary|truncate(50)}} </td>
			<td style="text-align:right"> {{story.points}} </td>
			<td style="text-align:center" > {{story.cell.label}} </td>
			<td style="text-align:center"> 


				{{story.labels|map(attribute='name')|join(', ') }}
				
				

			</td>

	</tr>

	{% endfor %} 

	

	</table>

	{% endif %}


{% endfor %}




{% endblock %}